<div>
  <% @channels.each do |channel| %>

    <% channel.ranking = channel.calc_ranking if channel.ranking.blank? %>
    <div class="public_channel_box">
      <div class="public_channel_inner">
        <p class="public_channel_name">
          <%= link_to truncate(channel.name, length: 23), channel_path(channel.id), :id => "showsite_#{channel.id}" %>
        </p>
        <p class="public_channel_user" >by <%= channel.user.login if channel.user.present? %></p>
        <p class="public_channel_desc"><%= channel.description %></p>
        <div class="progressbar" rel="<%= channel.ranking %>"></div>
        <p class="public_channel_tags">
          <% channel.tags.each do |tag| %>
            <a href="/channels/public?tag=<%=u tag.name %>"><%= tag.name %></a><% unless tag == channel.tags.last %>, <% end %>
          <% end %>
        </p>
      </div>
    </div>

  <% end %>
</div>

